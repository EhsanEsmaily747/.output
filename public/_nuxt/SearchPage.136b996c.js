import{_ as j,a as z,b as K}from"./Signup.19f52b98.js";import{_ as Q}from"./Nav.00826ed6.js";import{_ as X}from"./Nav.54df0d50.js";import{_ as Y}from"./Category.056d871a.js";import{_ as H}from"./Post.cc9202cd.js";import{_ as J,r,o as W,x as Z,w as B,t as c,c as g,u as o,l as p,i as h,a as m,q as C,T as b,b as d,F as L,f as M,g as y,v as tt,k as s,s as N}from"./entry.dac6c7c1.js";import{u as et}from"./useAuth.55454f55.js";import{u as v}from"./navBar.css.33dbc752.js";import{u as ot}from"./useModal.8b95bbe4.js";/* empty css                       */import"./CustomBtn.5376788d.js";import"./Icon.deda8fe1.js";import"./config.ea43d4ee.js";/* empty css                 */const at={class:"cates m-block",style:{"justify-content":"center"}},nt={class:"searchBar"},st={class:"posts m-block"},lt={__name:"SearchPage",async setup(it){let n,u,f=r({});const{decode:O,getToken:T}=et();let a=r("");W(()=>{a.value=T(),a.value&&(f.value=O(a.value))});const k=Z().href.split("=")[1],{loginopener:$,signupopener:w,showLogin:x,showSign:S}=ot(),A=([n,u]=B(()=>v("http://api2.kdanish.com/api/v1/categories/","$cuGp4LArMG")),n=await n,u(),n);let V=r(c(A.data.value.list)),_=r({});if(k){const l=([n,u]=B(()=>v(`http://api2.kdanish.com/api/v1/posts/?category=${k}`,"$7yYh37z0p1")),n=await n,u(),n);_.value=c(l.data.value.posts)}const P=async l=>{const t=await v(`http://api2.kdanish.com/api/v1/posts/?category=${l}`,"$8VsVBqQUyi");_.value=c(t.data.value.posts)},i=r(""),R=async()=>{if(i.value.length>1){const l=await v(`http://api2.kdanish.com/api/v1/posts/?searchTerm=${i.value}`,"$NX3w1hEami");_.value=c(l.data.value.posts)}};return(l,t)=>{const D=j,F=Q,U=X,q=z,E=K,G=Y,I=H;return s(),g("div",null,[o(a)?o(f).isAdmin?(s(),p(U,{key:2,onSignOut:t[3]||(t[3]=e=>h(a)?a.value=!1:a=!1)})):(s(),p(F,{key:1,id:o(f).id,onSignOut:t[2]||(t[2]=e=>h(a)?a.value=!1:a=!1)},null,8,["id"])):(s(),p(D,{key:0,onOpenSign:t[0]||(t[0]=e=>o(w)()),onOpenLogin:t[1]||(t[1]=e=>o($)())})),m(b,{name:"fade"},{default:C(()=>[y(m(q,{onCloseModal:t[4]||(t[4]=e=>x.value=!1),onOpenRegister:t[5]||(t[5]=e=>o(w)())},null,512),[[N,o(x)]])]),_:1}),m(b,{name:"fade"},{default:C(()=>[y(m(E,{onCloseModal:t[6]||(t[6]=e=>S.value=!1),onOpenLogin:t[7]||(t[7]=e=>o($)())},null,512),[[N,o(S)]])]),_:1}),d("div",at,[(s(!0),g(L,null,M(o(V),e=>(s(),p(G,{cat:e,onClick:ut=>P(e._id)},null,8,["cat","onClick"]))),256))]),d("div",nt,[y(d("input",{type:"search",class:"search","onUpdate:modelValue":t[8]||(t[8]=e=>h(i)?i.value=e:null),onKeydown:R,placeholder:"Search By Title"},null,544),[[tt,o(i)]])]),d("div",st,[(s(!0),g(L,null,M(o(_),e=>(s(),p(I,{post:e},null,8,["post"]))),256))])])}}},Bt=J(lt,[["__scopeId","data-v-77ab3aa9"]]);export{Bt as default};
